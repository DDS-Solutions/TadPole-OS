
> tadpole-os@0.0.0 test:coverage
> vitest run --coverage


[1m[46m RUN [49m[22m [36mv4.0.18 [39m[90mC:/Users/Home Office_PC/.gemini/antigravity/playground/tadpole-os[39m
      [2mCoverage enabled with [22m[33mv8[39m

[90mstdout[2m | tests/server/runner.test.ts
[22m[39mâ‰¡Æ’Ã…Â¢âˆ©â••Ã…  [Governor] Service Activated. Monitoring network throughput.

[90mstdout[2m | tests/server/runner.test.ts[2m > [22m[2mAgentRunner[2m > [22m[2mshould return text response immediately
[22m[39mâ‰¡Æ’Ã¶Ã¤ Turn 1: Generating...

[90mstdout[2m | tests/server/runner.test.ts[2m > [22m[2mAgentRunner[2m > [22m[2mshould execute tool call and loop back
[22m[39mâ‰¡Æ’Ã¶Ã¤ Turn 1: Generating...

stderr | src/pages/ModelManager.test.tsx > ModelManager Page > Vault Locking Logic > calls unlock when entering passphrase and clicking unlock
Warning: An update to ModelManager inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at ModelManager (C:/Users/Home Office_PC/.gemini/antigravity/playground/tadpole-os/src/pages/ModelManager.tsx:25:79)

stderr | src/pages/Missions.test.tsx > Missions Page > renders the mission management header
Warning: An update to Missions inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at Missions (C:/Users/Home Office_PC/.gemini/antigravity/playground/tadpole-os/src/pages/Missions.tsx:30:87)

 [32mÎ“Â£Ã´[39m tests/server/crypto.test.ts [2m([22m[2m4 tests[22m[2m)[22m[33m 1083[2mms[22m[39m
     [33m[2mÎ“Â£Ã´[22m[39m encrypts and decrypts a message correctly [33m 391[2mms[22m[39m
     [33m[2mÎ“Â£Ã´[22m[39m produces different ciphertexts for the same message (unique IV/Salt) [33m 324[2mms[22m[39m
stderr | src/pages/Missions.test.tsx > Missions Page > displays the new cluster modal when clicking New Mission
Warning: An update to Missions inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at Missions (C:/Users/Home Office_PC/.gemini/antigravity/playground/tadpole-os/src/pages/Missions.tsx:30:87)

[90mstdout[2m | tests/server/runner.test.ts[2m > [22m[2mAgentRunner[2m > [22m[2mshould execute tool call and loop back
[22m[39mâ‰¡Æ’Ã¶Ã† Requesting oversight for tool: 08fb4898-9a87-4816-a56e-5040c7fda9eb (test-skill)

[90mstdout[2m | tests/server/runner.test.ts[2m > [22m[2mAgentRunner[2m > [22m[2mshould execute tool call and loop back
[22m[39mÎ“ÃœÃ–âˆ©â••Ã… Executing skill: test-skill

[90mstdout[2m | tests/server/runner.test.ts[2m > [22m[2mAgentRunner[2m > [22m[2mshould execute tool call and loop back
[22m[39mâ‰¡Æ’Ã¶Ã¤ Turn 2: Generating...

 [32mÎ“Â£Ã´[39m src/pages/Settings.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[33m 591[2mms[22m[39m
 [32mÎ“Â£Ã´[39m src/pages/ModelManager.test.tsx [2m([22m[2m6 tests[22m[2m)[22m[33m 685[2mms[22m[39m
[90mstdout[2m | tests/server/runner.test.ts[2m > [22m[2mAgentRunner[2m > [22m[2mshould handle provider errors gracefully
[22m[39mâ‰¡Æ’Ã¶Ã¤ Turn 1: Generating...

stderr | src/pages/OversightDashboard.test.tsx > OversightDashboard Page > calls the decision endpoint when approving an action
Warning: An update to OversightDashboard inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at OversightDashboard (C:/Users/Home Office_PC/.gemini/antigravity/playground/tadpole-os/src/pages/OversightDashboard.tsx:23:67)

stderr | src/pages/OversightDashboard.test.tsx > OversightDashboard Page > calls the decision endpoint when approving an action
Warning: An update to OversightDashboard inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at OversightDashboard (C:/Users/Home Office_PC/.gemini/antigravity/playground/tadpole-os/src/pages/OversightDashboard.tsx:23:67)

 [32mÎ“Â£Ã´[39m src/pages/EngineDashboard.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[33m 1094[2mms[22m[39m
     [33m[2mÎ“Â£Ã´[22m[39m updates progress bar widths based on metrics [33m 731[2mms[22m[39m
stderr | tests/server/runner.test.ts > AgentRunner > should handle provider errors gracefully
Runner Error: Error: API Rate Limit
    at C:/Users/Home Office_PC/.gemini/antigravity/playground/tadpole-os/tests/server/runner.test.ts:97:40
    at file:///C:/Users/Home%20Office_PC/.gemini/antigravity/playground/tadpole-os/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///C:/Users/Home%20Office_PC/.gemini/antigravity/playground/tadpole-os/node_modules/@vitest/runner/dist/index.js:915:26
    at file:///C:/Users/Home%20Office_PC/.gemini/antigravity/playground/tadpole-os/node_modules/@vitest/runner/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///C:/Users/Home%20Office_PC/.gemini/antigravity/playground/tadpole-os/node_modules/@vitest/runner/dist/index.js:1209:10)
    at file:///C:/Users/Home%20Office_PC/.gemini/antigravity/playground/tadpole-os/node_modules/@vitest/runner/dist/index.js:1653:37
    at Traces.$ (file:///C:/Users/Home%20Office_PC/.gemini/antigravity/playground/tadpole-os/node_modules/vitest/dist/chunks/traces.CCmnQaNT.js:142:27)
    at trace (file:///C:/Users/Home%20Office_PC/.gemini/antigravity/playground/tadpole-os/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)
    at runTest (file:///C:/Users/Home%20Office_PC/.gemini/antigravity/playground/tadpole-os/node_modules/@vitest/runner/dist/index.js:1653:12)

 [32mÎ“Â£Ã´[39m tests/server/runner.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 1604[2mms[22m[39m
     [33m[2mÎ“Â£Ã´[22m[39m should execute tool call and loop back [33m 1061[2mms[22m[39m
     [33m[2mÎ“Â£Ã´[22m[39m should handle provider errors gracefully [33m 504[2mms[22m[39m
Not implemented: Window's alert() method
stderr | src/pages/OversightDashboard.test.tsx > OversightDashboard Page > triggers the kill switch when button is clicked
Warning: An update to OversightDashboard inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at OversightDashboard (C:/Users/Home Office_PC/.gemini/antigravity/playground/tadpole-os/src/pages/OversightDashboard.tsx:23:67)

stderr | src/pages/OversightDashboard.test.tsx > OversightDashboard Page > triggers the kill switch when button is clicked
Warning: An update to OversightDashboard inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at OversightDashboard (C:/Users/Home Office_PC/.gemini/antigravity/playground/tadpole-os/src/pages/OversightDashboard.tsx:23:67)
Warning: An update to OversightDashboard inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at OversightDashboard (C:/Users/Home Office_PC/.gemini/antigravity/playground/tadpole-os/src/pages/OversightDashboard.tsx:23:67)
Warning: An update to OversightDashboard inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at OversightDashboard (C:/Users/Home Office_PC/.gemini/antigravity/playground/tadpole-os/src/pages/OversightDashboard.tsx:23:67)
Warning: An update to OversightDashboard inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at OversightDashboard (C:/Users/Home Office_PC/.gemini/antigravity/playground/tadpole-os/src/pages/OversightDashboard.tsx:23:67)
Warning: An update to OversightDashboard inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at OversightDashboard (C:/Users/Home Office_PC/.gemini/antigravity/playground/tadpole-os/src/pages/OversightDashboard.tsx:23:67)

 [32mÎ“Â£Ã´[39m src/pages/OversightDashboard.test.tsx [2m([22m[2m5 tests[22m[2m)[22m[33m 1465[2mms[22m[39m
     [33m[2mÎ“Â£Ã´[22m[39m displays the disconnection banner when server fails [33m 318[2mms[22m[39m
     [33m[2mÎ“Â£Ã´[22m[39m calls the decision endpoint when approving an action [33m 384[2mms[22m[39m
     [33m[2mÎ“Â£Ã´[22m[39m filters the ledger based on search input [33m 317[2mms[22m[39m
stderr | src/pages/Missions.test.tsx > Missions Page > includes Marketing and Design in the department dropdown
Warning: An update to Missions inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at Missions (C:/Users/Home Office_PC/.gemini/antigravity/playground/tadpole-os/src/pages/Missions.tsx:30:87)

 [32mÎ“Â£Ã´[39m src/pages/Missions.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[33m 2116[2mms[22m[39m
     [33m[2mÎ“Â£Ã´[22m[39m includes Marketing and Design in the department dropdown [33m 1854[2mms[22m[39m
Error: Neural Spike Detected! Simulation crash.
    at BuggyComponent (C:/Users/Home Office_PC/.gemini/antigravity/playground/tadpole-os/src/components/ErrorBoundary.test.tsx:8:15)
    at renderWithHooks (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\react-dom\cjs\react-dom.development.js:16305:18)
    at mountIndeterminateComponent (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\react-dom\cjs\react-dom.development.js:20074:13)
    at beginWork (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\react-dom\cjs\react-dom.development.js:21587:16)
    at HTMLUnknownElement.callCallback (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\react-dom\cjs\react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\jsdom\lib\generated\idl\EventListener.js:26:30)
    at innerInvokeEventListeners (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:360:16)
    at invokeEventListeners (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:296:3)
    at HTMLUnknownElementImpl._dispatch (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:243:9)
    at HTMLUnknownElementImpl.dispatchEvent (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:114:17)
Error: Neural Spike Detected! Simulation crash.
    at BuggyComponent (C:/Users/Home Office_PC/.gemini/antigravity/playground/tadpole-os/src/components/ErrorBoundary.test.tsx:8:15)
    at renderWithHooks (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\react-dom\cjs\react-dom.development.js:16305:18)
    at mountIndeterminateComponent (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\react-dom\cjs\react-dom.development.js:20074:13)
    at beginWork (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\react-dom\cjs\react-dom.development.js:21587:16)
    at HTMLUnknownElement.callCallback (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\react-dom\cjs\react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\jsdom\lib\generated\idl\EventListener.js:26:30)
    at innerInvokeEventListeners (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:360:16)
    at invokeEventListeners (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:296:3)
    at HTMLUnknownElementImpl._dispatch (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:243:9)
    at HTMLUnknownElementImpl.dispatchEvent (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:114:17)
Error: Neural Spike Detected! Simulation crash.
    at BuggyComponent (C:/Users/Home Office_PC/.gemini/antigravity/playground/tadpole-os/src/components/ErrorBoundary.test.tsx:8:15)
    at renderWithHooks (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\react-dom\cjs\react-dom.development.js:16305:18)
    at mountIndeterminateComponent (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\react-dom\cjs\react-dom.development.js:20074:13)
    at beginWork (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\react-dom\cjs\react-dom.development.js:21587:16)
    at HTMLUnknownElement.callCallback (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\react-dom\cjs\react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\jsdom\lib\generated\idl\EventListener.js:26:30)
    at innerInvokeEventListeners (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:360:16)
    at invokeEventListeners (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:296:3)
    at HTMLUnknownElementImpl._dispatch (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:243:9)
    at HTMLUnknownElementImpl.dispatchEvent (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:114:17)
 [32mÎ“Â£Ã´[39m tests/server/skills/fs.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 107[2mms[22m[39m
Error: Neural Spike Detected! Simulation crash.
    at BuggyComponent (C:/Users/Home Office_PC/.gemini/antigravity/playground/tadpole-os/src/components/ErrorBoundary.test.tsx:8:15)
    at renderWithHooks (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\react-dom\cjs\react-dom.development.js:16305:18)
    at mountIndeterminateComponent (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\react-dom\cjs\react-dom.development.js:20074:13)
    at beginWork (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\react-dom\cjs\react-dom.development.js:21587:16)
    at HTMLUnknownElement.callCallback (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\react-dom\cjs\react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\jsdom\lib\generated\idl\EventListener.js:26:30)
    at innerInvokeEventListeners (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:360:16)
    at invokeEventListeners (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:296:3)
    at HTMLUnknownElementImpl._dispatch (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:243:9)
    at HTMLUnknownElementImpl.dispatchEvent (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:114:17)
Error: Neural Spike Detected! Simulation crash.
    at BuggyComponent (C:/Users/Home Office_PC/.gemini/antigravity/playground/tadpole-os/src/components/ErrorBoundary.test.tsx:8:15)
    at renderWithHooks (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\react-dom\cjs\react-dom.development.js:16305:18)
    at mountIndeterminateComponent (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\react-dom\cjs\react-dom.development.js:20074:13)
    at beginWork (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\react-dom\cjs\react-dom.development.js:21587:16)
    at HTMLUnknownElement.callCallback (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\react-dom\cjs\react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\jsdom\lib\generated\idl\EventListener.js:26:30)
    at innerInvokeEventListeners (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:360:16)
    at invokeEventListeners (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:296:3)
    at HTMLUnknownElementImpl._dispatch (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:243:9)
    at HTMLUnknownElementImpl.dispatchEvent (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:114:17)
[90mstdout[2m | tests/server/phase30.test.ts
[22m[39mâ‰¡Æ’Ã…Â¢âˆ©â••Ã…  [Governor] Service Activated. Monitoring network throughput.

Error: Neural Spike Detected! Simulation crash.
    at BuggyComponent (C:/Users/Home Office_PC/.gemini/antigravity/playground/tadpole-os/src/components/ErrorBoundary.test.tsx:8:15)
    at renderWithHooks (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\react-dom\cjs\react-dom.development.js:16305:18)
    at mountIndeterminateComponent (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\react-dom\cjs\react-dom.development.js:20074:13)
    at beginWork (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\react-dom\cjs\react-dom.development.js:21587:16)
    at HTMLUnknownElement.callCallback (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\react-dom\cjs\react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\jsdom\lib\generated\idl\EventListener.js:26:30)
    at innerInvokeEventListeners (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:360:16)
    at invokeEventListeners (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:296:3)
    at HTMLUnknownElementImpl._dispatch (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:243:9)
    at HTMLUnknownElementImpl.dispatchEvent (C:\Users\Home Office_PC\.gemini\antigravity\playground\tadpole-os\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:114:17)
[90mstdout[2m | tests/server/gateway.test.ts[2m > [22m[2mGateway[2m > [22m[2magent config route should update agent
[22m[39mâ‰¡Æ’Ã¦Ã± Updated Agent Config: Updated Agent (1)

[90mstdout[2m | tests/server/gateway.test.ts[2m > [22m[2mGateway[2m > [22m[2magent config route should initialize new agent
[22m[39mâ‰¡Æ’Ã¦Ã± Updated Agent Config: Brand New (new-agent)

 [32mÎ“Â£Ã´[39m src/components/ErrorBoundary.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[33m 553[2mms[22m[39m
[90mstdout[2m | tests/server/gateway.test.ts[2m > [22m[2mGateway[2m > [22m[2magent config route should initialize specific agent IDs
[22m[39mâ‰¡Æ’Ã¦Ã± Updated Agent Config: Updated Agent (1)
â‰¡Æ’Ã¦Ã± Updated Agent Config: New Agent (2)
â‰¡Æ’Ã¦Ã± Updated Agent Config: New Agent (3)

[90mstdout[2m | tests/server/gateway.test.ts[2m > [22m[2mGateway[2m > [22m[2magents route should return detailed list when agents exist
[22m[39mâ‰¡Æ’Ã¦Ã± Updated Agent Config: Test (test-agent)

[90mstdout[2m | tests/server/gateway.test.ts[2m > [22m[2mGateway[2m > [22m[2mmessage route should trigger runner
[22m[39mâ‰¡Æ’Ã´Ã­ [Gateway] Received SendCommand for Agent 1
   - Model: undefined (undefined)
   - API Key present: false
   - Message: Hello...

stderr | tests/server/gateway.test.ts > Gateway > message route should trigger runner
Agent Run Failed: TypeError: Cannot read properties of undefined (reading 'success')
    at C:/Users/Home Office_PC/.gemini/antigravity/playground/tadpole-os/server/gateway.ts:253:28
    at processTicksAndRejections (node:internal/process/task_queues:103:5)
    at C:/Users/Home Office_PC/.gemini/antigravity/playground/tadpole-os/tests/server/gateway.test.ts:242:9
    at file:///C:/Users/Home%20Office_PC/.gemini/antigravity/playground/tadpole-os/node_modules/@vitest/runner/dist/index.js:915:20

[90mstdout[2m | tests/server/gateway.test.ts[2m > [22m[2mGateway[2m > [22m[2moversight decision route should notify oversight gate
[22m[39mRegistered POST routes: [
  [32m'/agents/:id/config'[39m, [32m'/agents/:id/send'[39m, [32m'/oversight/:id/decide'[39m,
  [32m'/engine/kill'[39m,       [32m'/oversight/kill'[39m,  [32m'/oversight/settings'[39m,
  [32m'/agents/:id/config'[39m, [32m'/agents/:id/send'[39m, [32m'/oversight/:id/decide'[39m,
  [32m'/engine/kill'[39m,       [32m'/oversight/kill'[39m,  [32m'/oversight/settings'[39m,
  [32m'/agents/:id/config'[39m, [32m'/agents/:id/send'[39m, [32m'/oversight/:id/decide'[39m,
  [32m'/engine/kill'[39m,       [32m'/oversight/kill'[39m,  [32m'/oversight/settings'[39m,
  [32m'/agents/:id/config'[39m, [32m'/agents/:id/send'[39m, [32m'/oversight/:id/decide'[39m,
  [32m'/engine/kill'[39m,       [32m'/oversight/kill'[39m,  [32m'/oversight/settings'[39m,
  [32m'/agents/:id/config'[39m, [32m'/agents/:id/send'[39m, [32m'/oversight/:id/decide'[39m,
  [32m'/engine/kill'[39m,       [32m'/oversight/kill'[39m,  [32m'/oversight/settings'[39m,
  [32m'/agents/:id/config'[39m, [32m'/agents/:id/send'[39m, [32m'/oversight/:id/decide'[39m,
  [32m'/engine/kill'[39m,       [32m'/oversight/kill'[39m,  [32m'/oversight/settings'[39m,
  [32m'/agents/:id/config'[39m, [32m'/agents/:id/send'[39m, [32m'/oversight/:id/decide'[39m,
  [32m'/engine/kill'[39m,       [32m'/oversight/kill'[39m,  [32m'/oversight/settings'[39m,
  [32m'/agents/:id/config'[39m, [32m'/agents/:id/send'[39m, [32m'/oversight/:id/decide'[39m,
  [32m'/engine/kill'[39m,       [32m'/oversight/kill'[39m,  [32m'/oversight/settings'[39m,
  [32m'/agents/:id/config'[39m, [32m'/agents/:id/send'[39m, [32m'/oversight/:id/decide'[39m,
  [32m'/engine/kill'[39m,       [32m'/oversight/kill'[39m,  [32m'/oversight/settings'[39m,
  [32m'/agents/:id/config'[39m, [32m'/agents/:id/send'[39m, [32m'/oversight/:id/decide'[39m,
  [32m'/engine/kill'[39m,       [32m'/oversight/kill'[39m,  [32m'/oversight/settings'[39m,
  [32m'/agents/:id/config'[39m, [32m'/agents/:id/send'[39m, [32m'/oversight/:id/decide'[39m,
  [32m'/engine/kill'[39m,       [32m'/oversight/kill'[39m,  [32m'/oversight/settings'[39m,
  [32m'/agents/:id/config'[39m, [32m'/agents/:id/send'[39m, [32m'/oversight/:id/decide'[39m,
  [32m'/engine/kill'[39m,       [32m'/oversight/kill'[39m,  [32m'/oversight/settings'[39m,
  [32m'/agents/:id/config'[39m, [32m'/agents/:id/send'[39m, [32m'/oversight/:id/decide'[39m,
  [32m'/engine/kill'[39m,       [32m'/oversight/kill'[39m,  [32m'/oversight/settings'[39m
]

[90mstdout[2m | tests/server/gateway.test.ts[2m > [22m[2mGateway[2m > [22m[2mengine kill route should execute cleanup
[22m[39mâ‰¡Æ’ÃœÂ¿ EMERGENCY KILL SWITCH TRIGGERED

 [32mÎ“Â£Ã´[39m tests/server/gateway.test.ts [2m([22m[2m17 tests[22m[2m)[22m[32m 45[2mms[22m[39m
[90mstdout[2m | tests/server/phase30.test.ts[2m > [22m[2mPhase 30: System Intelligence Verification[2m > [22m[2mMission-Aware Oversight[2m > [22m[2mshould propagate clusterId from runner to oversight
[22m[39mâ‰¡Æ’Ã¶Ã¤ Turn 1: Generating...

[90mstdout[2m | tests/server/phase30.test.ts[2m > [22m[2mPhase 30: System Intelligence Verification[2m > [22m[2mMission-Aware Oversight[2m > [22m[2mshould propagate clusterId from runner to oversight
[22m[39mâ‰¡Æ’Ã¶Ã† Requesting oversight for tool: b14efc74-d88a-4905-b492-10066ea02a3d (test-skill)

 [32mÎ“Â£Ã´[39m tests/server/phase30.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 49[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/commandProcessor.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 12[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/server/oversight.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 14[2mms[22m[39m
 [32mÎ“Â£Ã´[39m src/services/workspaceStore.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 11[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/eventBus.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 9[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/settingsStore.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32mÎ“Â£Ã´[39m src/services/providerStore.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/handoff.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 6[2mms[22m[39m

[2m Test Files [22m [1m[32m18 passed[39m[22m[90m (18)[39m
[2m      Tests [22m [1m[32m88 passed[39m[22m[90m (88)[39m
[2m   Start at [22m 19:52:24
[2m   Duration [22m 17.47s[2m (transform 3.70s, setup 7.48s, import 7.89s, tests 9.46s, environment 62.74s)[22m

[34m % [39m[2mCoverage report from [22m[33mv8[39m
-------------------|---------|----------|---------|---------|-------------------
File               | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
-------------------|---------|----------|---------|---------|-------------------
All files          |   29.85 |    21.13 |   25.82 |   31.69 |                   
 server            |   61.33 |    47.29 |    62.9 |   66.57 |                   
  constants.ts     |     100 |      100 |     100 |     100 |                   
  gateway.ts       |   62.98 |    46.72 |   77.77 |   71.15 | ...54,382-400,424 
  governor.ts      |   55.35 |       50 |      50 |   59.18 | ...02-106,111,114 
  index.ts         |       0 |      100 |       0 |       0 | 15-42             
  memory.ts        |      75 |      100 |      50 |      75 | 18,31             
  oversight.ts     |   73.21 |    66.66 |      60 |   76.92 | ...94-206,216-218 
  runner.ts        |      60 |    41.07 |      60 |   63.52 | ...33,283-284,296 
  types.ts         |       0 |        0 |       0 |       0 |                   
 ...er/dist/server |       0 |        0 |       0 |       0 |                   
  constants.d.ts   |       0 |        0 |       0 |       0 |                   
  gateway.d.ts     |       0 |        0 |       0 |       0 |                   
  governor.d.ts    |       0 |        0 |       0 |       0 |                   
  index.d.ts       |       0 |        0 |       0 |       0 |                   
  memory.d.ts      |       0 |        0 |       0 |       0 |                   
  oversight.d.ts   |       0 |        0 |       0 |       0 |                   
  runner.d.ts      |       0 |        0 |       0 |       0 |                   
  types.d.ts       |       0 |        0 |       0 |       0 |                   
 ...rver/providers |       0 |        0 |       0 |       0 |                   
  gemini.d.ts      |       0 |        0 |       0 |       0 |                   
  groq.d.ts        |       0 |        0 |       0 |       0 |                   
  openai.d.ts      |       0 |        0 |       0 |       0 |                   
 .../server/skills |       0 |        0 |       0 |       0 |                   
  ...ate_task.d.ts |       0 |        0 |       0 |       0 |                   
  fetch.d.ts       |       0 |        0 |       0 |       0 |                   
  fs.d.ts          |       0 |        0 |       0 |       0 |                   
  index.d.ts       |       0 |        0 |       0 |       0 |                   
  reasoning.d.ts   |       0 |        0 |       0 |       0 |                   
  shell.d.ts       |       0 |        0 |       0 |       0 |                   
  weather.d.ts     |       0 |        0 |       0 |       0 |                   
 server/providers  |       0 |        0 |       0 |       0 |                   
  gemini.ts        |       0 |        0 |       0 |       0 | 23-134            
  groq.ts          |       0 |        0 |       0 |       0 | 14-113            
  openai.ts        |       0 |        0 |       0 |       0 | 14-120            
 server/skills     |      30 |    11.66 |   23.52 |   31.06 |                   
  delegate_task.ts |   16.66 |        0 |       0 |   16.66 | 43-62             
  fetch.ts         |    4.76 |        0 |       0 |    5.55 | 37-82             
  fs.ts            |      75 |    58.33 |     100 |   80.76 | 83-91             
  index.ts         |     100 |      100 |     100 |     100 |                   
  reasoning.ts     |      50 |      100 |       0 |      50 | 35                
  shell.ts         |   13.33 |        0 |       0 |   13.79 | 42-105            
  weather.ts       |    5.26 |        0 |       0 |    5.26 | 43-83             
 src               |    37.5 |      100 |       0 |   42.85 |                   
  App.tsx          |       0 |      100 |       0 |       0 | 18-24             
  constants.ts     |     100 |      100 |     100 |     100 |                   
 src/components    |    3.97 |     1.74 |    5.68 |    4.48 |                   
  ...nfigPanel.tsx |       0 |        0 |       0 |       0 | 10-430            
  ...rBoundary.tsx |   91.66 |       60 |     100 |     100 | 30,39-50          
  ...archyNode.tsx |       0 |        0 |       0 |       0 | 9-396             
  ModelBadge.tsx   |       0 |        0 |       0 |       0 | 18-85             
  ...sightNode.tsx |       0 |        0 |       0 |       0 | 10-63             
  Terminal.tsx     |       0 |        0 |       0 |       0 | 27-160            
 src/data          |   46.66 |        0 |       0 |   46.66 |                   
  mockAgents.ts    |   33.33 |        0 |       0 |   33.33 | 377-388           
  mockOversight.ts |     100 |      100 |     100 |     100 |                   
  models.ts        |     100 |      100 |     100 |     100 |                   
 src/hooks         |       0 |        0 |       0 |       0 |                   
  ...gineStatus.ts |       0 |        0 |       0 |       0 | 18-47             
 src/layouts       |       0 |        0 |       0 |       0 |                   
  ...ardLayout.tsx |       0 |        0 |       0 |       0 | 19-152            
 src/pages         |   28.48 |    28.21 |   20.07 |   31.22 |                   
  Docs.tsx         |       0 |        0 |       0 |       0 | 13-148            
  ...Dashboard.tsx |     100 |    88.88 |     100 |     100 | 30-32             
  Missions.tsx     |   41.34 |    40.69 |   36.58 |   40.86 | ...56-411,429-472 
  ModelManager.tsx |   35.89 |     44.3 |   16.66 |   40.77 | ...74,523-583,600 
  OpsDashboard.tsx |       0 |        0 |       0 |       0 | 23-256            
  OrgChart.tsx     |       0 |        0 |       0 |       0 | 19-303            
  ...Dashboard.tsx |   74.07 |    63.01 |   69.44 |    80.2 | ...66-290,375-402 
  Settings.tsx     |    92.3 |    92.85 |      80 |      96 | 54                
  Standups.tsx     |       0 |        0 |       0 |       0 | 10-192            
  Workspaces.tsx   |       0 |        0 |       0 |       0 | 8-128             
 src/services      |   27.72 |    26.09 |   35.29 |    27.6 |                   
  agentService.ts  |       0 |        0 |       0 |       0 | 12-101            
  ...dProcessor.ts |   52.63 |    39.62 |      50 |   52.32 | ...97,302,305-310 
  eventBus.ts      |   82.35 |       50 |      75 |   86.66 | 44,59             
  ...lawService.ts |    1.47 |        0 |       0 |    1.72 | 11-13,21-302      
  ...clawSocket.ts |       0 |        0 |       0 |       0 | 13-227            
  providerStore.ts |   41.74 |       50 |   24.24 |   44.87 | ...35-147,164-227 
  settingsStore.ts |   79.41 |    65.38 |   85.71 |      80 | ...,79-80,115-118 
  voiceClient.ts   |       0 |        0 |       0 |       0 | 7-84              
  ...spaceStore.ts |   54.54 |     46.8 |   63.26 |   52.45 | ...07-239,294-295 
 src/types         |       0 |        0 |       0 |       0 |                   
  index.ts         |       0 |        0 |       0 |       0 |                   
  mission.ts       |       0 |        0 |       0 |       0 |                   
  openclaw.ts      |       0 |        0 |       0 |       0 |                   
 src/utils         |   52.94 |    14.28 |   56.25 |   51.06 |                   
  crypto-core.ts   |     100 |      100 |     100 |     100 |                   
  crypto.ts        |       0 |        0 |       0 |       0 | 2-49              
 src/workers       |       0 |        0 |       0 |       0 |                   
  crypto.worker.ts |       0 |        0 |       0 |       0 | 10-27             
-------------------|---------|----------|---------|---------|-------------------
